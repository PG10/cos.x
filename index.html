<!DOCTYPE html>
<html>
<head>
    <title>LED Fixture Model - Selective Photorealistic Glow</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="./js/three.min.js"></script>
    <script src="./js/GLTFLoader.js"></script>
    <script src="./js/RGBELoader.js"></script>
    <script src="./js/DRACOLoader.js"></script>
    <script src="./js/OrbitControls.js"></script>
    
    <script src="./js/EffectComposer.js"></script>
    <script src="./js/RenderPass.js"></script>
    <script src="./js/UnrealBloomPass.js"></script> 
    
    <script src="./js/CopyShader.js"></script>
    <script src="./js/LuminosityHighPassShader.js"></script>
    <script src="./js/ShaderPass.js"></script>
    
    <script>
        // --- FILE PATHS (All 8 Components) ---
        const BANDS_MODEL_PATH      = '/cos.x/bands.glb';
        const FEEDS_MODEL_PATH      = '/cos.x/feeds.glb';
        const GRIPPER_MODEL_PATH    = '/cos.x/gripper.glb';
        const HOLDER_MODEL_PATH     = '/cos.x/holder.glb';
        const LENS_MODEL_PATH       = '/cos.x/lens.glb';
        const SHADE_MODEL_PATH      = '/cos.x/shade.glb';
        const SINK_MODEL_PATH       = '/cos.x/sink.glb';    
        const SUSPENSION_MODEL_PATH = '/cos.x/suspension.glb';
        
        let scene, camera, renderer, controls;
        let bloomComposer, finalComposer;
        
        // --- SELECTIVE BLOOM SETUP ---
        const ENTIRE_SCENE = 0;
        const BLOOM_SCENE = 1;

        const bloomLayer = new THREE.Layers();
        bloomLayer.set(BLOOM_SCENE);

        const materials = {};
        // Dark material used to hide non-glowing parts during the Bloom render pass
        const darkMaterial = new THREE.MeshBasicMaterial( { color: 0x000000 } );
        // ------------------------------
        
        function init() {
            // --- EASY VIEW ADJUSTMENT VARIABLES ---
            const INITIAL_CAMERA_Z = 50.0; 
            // --------------------------------------

            // 1. Setup Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);